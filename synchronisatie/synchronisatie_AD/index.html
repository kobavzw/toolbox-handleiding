<!doctype html>
<html lang="nl" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-synchronisatie/synchronisatie_AD/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Synchronisatie met ActiveDirectory | Toolbox Handleiding</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.tbvs.be/synchronisatie/synchronisatie_AD/"><meta data-rh="true" name="docusaurus_locale" content="nl"><meta data-rh="true" name="docsearch:language" content="nl"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Synchronisatie met ActiveDirectory | Toolbox Handleiding"><meta data-rh="true" name="description" content="Aangezien Toolbox in de cloud draait en moet kunnen communiceren met de ActiveDirectory die (meestal) in de school draait, werd een bijkomende component &#x27;Toolbox Gateway&#x27; ontwikkeld."><meta data-rh="true" property="og:description" content="Aangezien Toolbox in de cloud draait en moet kunnen communiceren met de ActiveDirectory die (meestal) in de school draait, werd een bijkomende component &#x27;Toolbox Gateway&#x27; ontwikkeld."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.tbvs.be/synchronisatie/synchronisatie_AD/"><link data-rh="true" rel="alternate" href="https://www.tbvs.be/synchronisatie/synchronisatie_AD/" hreflang="nl"><link data-rh="true" rel="alternate" href="https://www.tbvs.be/synchronisatie/synchronisatie_AD/" hreflang="x-default"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,200;0,400;0,500;0,600;0,800;1,400&display=swap"><link rel="stylesheet" href="/assets/css/styles.65db045c.css">
<link rel="preload" href="/assets/js/runtime~main.87e76bbb.js" as="script">
<link rel="preload" href="/assets/js/main.2d3fa607.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Ga naar hoofdinhoud"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Ga naar hoofdinhoud</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Toolbox logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Toolbox logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Handleiding Toolbox</b></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll naar boven" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/inloggen">Inloggen</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/FAQ">FAQ</a><button aria-label="Klap de opvouwbare zijbalkcategorie &#x27;FAQ&#x27; in of uit" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/boekenverkoop">Boekenverkoop</a><button aria-label="Klap de opvouwbare zijbalkcategorie &#x27;Boekenverkoop&#x27; in of uit" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/uniflow">Canon Uniflow</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/fietsvergoeding">Fietsvergoeding</a><button aria-label="Klap de opvouwbare zijbalkcategorie &#x27;Fietsvergoeding&#x27; in of uit" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/gebouwen_lokalen">Gebouwen en lokalen</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/gebruikersbeheer">Gebruikersbeheer</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/inschrijvingen">Inschrijvingen</a><button aria-label="Klap de opvouwbare zijbalkcategorie &#x27;Inschrijvingen&#x27; in of uit" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/inventaris">Inventaris</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/kas">Kas</a><button aria-label="Klap de opvouwbare zijbalkcategorie &#x27;Kas&#x27; in of uit" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/kassa">Kassa</a><button aria-label="Klap de opvouwbare zijbalkcategorie &#x27;Kassa&#x27; in of uit" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/leerlingenrekeningen">Leerlingenrekeningen</a><button aria-label="Klap de opvouwbare zijbalkcategorie &#x27;Leerlingenrekeningen&#x27; in of uit" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/lessenrooster">Lessenrooster beheer</a><button aria-label="Klap de opvouwbare zijbalkcategorie &#x27;Lessenrooster beheer&#x27; in of uit" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/netwerken">Netwerken</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbaar_vervoer">Openbaar vervoer</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/openstaande_facturen">Openstaande facturen</a><button aria-label="Klap de opvouwbare zijbalkcategorie &#x27;Openstaande facturen&#x27; in of uit" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/registratie_basisschool">Registratie basisschool</a><button aria-label="Klap de opvouwbare zijbalkcategorie &#x27;Registratie basisschool&#x27; in of uit" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/synchronisatie">Sychronisatiemodules</a><button aria-label="Klap de opvouwbare zijbalkcategorie &#x27;Sychronisatiemodules&#x27; in of uit" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/synchronisatie/synchronisatie_lln/">Synchronisatie leerlingen (basisschool) en internaten</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/synchronisatie/synchronisatie_leraren/">Synchronisatie leraren</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/synchronisatie/synchronisatie_externen/">Synchronisatie externen</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/synchronisatie/synchronisatie_AD/">Synchronisatie met ActiveDirectory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/synchronisatie/synchronisatie_EOL/">Synchronisatie Exact Online</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/synchronisatie/synchronisatie Smartschool/">Synchronisatie Smartschool</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/webshop">Webshop</a><button aria-label="Klap de opvouwbare zijbalkcategorie &#x27;Webshop&#x27; in of uit" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/woon_werverkeer">Woon-werkverkeer en Belcotax</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Broodkruimels"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Homepagina" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/synchronisatie"><span itemprop="name">Sychronisatiemodules</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Synchronisatie met ActiveDirectory</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Op deze pagina</button></div><div class="theme-doc-markdown markdown"><header><h1>Synchronisatie met ActiveDirectory</h1></header><p>Aangezien Toolbox in de cloud draait en moet kunnen communiceren met de ActiveDirectory die (meestal) in de school draait, werd een bijkomende component &#x27;Toolbox Gateway&#x27; ontwikkeld.</p><p>Toolbox Gateway draait op de AD of op een machine die verbonden is met de AD. De gateway bestaat uit een webserver (IIS) en enkele PHP/Powershell scripts. Die zorgen voor een beveiligde verbinding tussen Toolbox en de ActiveDirectory.</p><p><img loading="lazy" alt="ActiveDirectory" src="/assets/images/SchemaADGateway-781f59cecf78266a126953fa504c3fde.png" width="2380" height="594" class="img_ev3q"> </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="webserver-installeren">Webserver installeren<a href="#webserver-installeren" class="hash-link" aria-label="Direct link naar Webserver installeren" title="Direct link naar Webserver installeren">​</a></h2><p>Om Toolbox te laten communiceren met de ActiveDirectory in de school, moeten we de Toolbox Gateway installeren. Die vereist eerst en vooral de installatie van een Webserver (IIS) die PHP kan draaien.</p><p>De webserver mag geïnstalleerd worden op de ActiveDirectory server zelf of op een (virtuele) Windows server in het netwerk van de school die ook lid is van het AD domein.</p><p>Voeg eerst en vooral een &#x27;Rol&#x27; toe via de server manager.</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/webserver1-824be80b16dbca4c872ca6206ef60914.png"><img src="/assets/images/webserver2-2224607d63cae52d4fc73ee241eabc20.png"><img src="/assets/images/webserver3-e2dec1fc7082d8a9388160145f4be76a.png"><img src="/assets/images/webserver4-963839391ef5693523a084c180b13fc4.png"></div><p>Vink Web Server (IIS) aan</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/webserver5-97641488b2e15b3244702c3636f1e75b.png"></div><p>Installeer de Management Console mee (staat standaard aan).</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/webserver6-528f2a976c45d7cd7ff505b383df1e69.png"></div><p>In het volgende scherm vink je de module Active Directory for powershell aan.</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/webserver7-17d8b9c6bb2864fbcb570c17c6fb5321.png"></div><p>In het scherm &#x27;Select role services&#x27; vink je onder Application Development de optie &#x27;CGI&#x27; aan.</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/webserver8-31218cc65c0255522af677ff3f3cb74e.png"><img src="/assets/images/webserver9-a484c3b0fc0ebe2d8394a822ec9faf43.png"></div><p>Bevestig</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/webserver10-3945ac8b11f27aee126d9d02ca3d958b.png"><img src="/assets/images/webserver11-47424c04fb5059827f4408b0867a5f3d.png"></div><p>Ben je hiermee klaar, ga dan verder: PHP installeren op je webserver</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="php-op-de-webserver-installeren">PHP op de webserver installeren<a href="#php-op-de-webserver-installeren" class="hash-link" aria-label="Direct link naar PHP op de webserver installeren" title="Direct link naar PHP op de webserver installeren">​</a></h2><p>Ga naar <a href="https://windows.php.net" target="_blank" rel="noopener noreferrer">https://windows.php.net</a> - Downloads</p><p>Download daar de X64 Non Thread Safe versie van PHP (in zip formaat).</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/PHP1-f923e77b4afd1a316f39e7f8087b1cd9.png"><img src="/assets/images/PHP2-96969773c356f4bee056d3a24ef20bd2.png"></div><p>Pak dit zip-bestand uit in de locatie c:\php.</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/PHP3-54ebf6f30a22d89a0b141fa4072d2dc2.png"></div><p>Om te testen of PHP werkt, dubbelklik je op php-cgi.exe. Als je een foutmelding krijgt over een ontbrekende DLL, dan moet je de C++ redistributable 2015-2019 installeren.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#ffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">The VC15 and VS16 builds require to have the Visual C++ Redistributable for Visual Studio 2015-2019 x64 or x86 installed.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kopieer code naar klembord" title="Kopieer" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Zorg eerst dat PHP opstart alvorens verder te gaan!</p><p>Wijzig de naam van het bestand php.ini-production naar php.ini.</p><p>Open het bestand en zoek naar fastcgi.impersonate = 1. Haal daar de puntkomma voor die lijn weg en bewaar het bestand. Activeer ook de extensie openssl: extension=openssl (puntkomma verwijderen voor deze lijn).</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/PHP4-980cf6862bbccc97b0671f3596911538.png"></div><p>Ga naar de Internet Information Services Manager.</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/PHP5-f5414c086ef2e56d067159a9d29ab525.png"></div><p>Ga naar de Handler Mappings en voeg een Module Mapping toe.</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/PHP6-c145f1d1175fa1e209cba2b9bb6bde1e.png"></div><p>Vul volgende instellingen in:</p><ul><li>Request path: *.php</li><li>Module: FastCgiModule</li><li>Executable: C:\php\php-cgi.exe</li><li>Name: PHP via FastCGI</li></ul><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/PHP7-c83550e882c051a0378973eb59808382.png"></div><p>Maak nu door middel van Kladblok een testbestand aan in de map c:\inetpub\wwwroot.
Noem dit bestand test.php (let op daar er geen verborgen .txt extensie achter staat).
In het bestand zet je deze inhoud: </p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#ffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    phpinfo();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ?&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kopieer code naar klembord" title="Kopieer" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Surf nu op de server naar http://localhost/test.php. Als alles goed gaat, krijg je deze pagina te zien:</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/PHP8-c474e8c4eb4bebc5155146d2fb74fcc5.png"></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="toolbox-gateway-ad-installeren">Toolbox gateway AD installeren<a href="#toolbox-gateway-ad-installeren" class="hash-link" aria-label="Direct link naar Toolbox gateway AD installeren" title="Direct link naar Toolbox gateway AD installeren">​</a></h2><p>Download de laatste versie van Toolbox Gateway op <a href="https://www.tbvs.be/downloads/ToolboxGateway1_5_0.zip" target="_blank" rel="noopener noreferrer">https://www.tbvs.be/downloads/ToolboxGateway1_5_0.zip</a> (versie 01 februari 2023).</p><p>Plaats de uitgepakte map op de C: schijf en hernoem de map naar toolbox.</p><p>Als je de Toolbox Gateway enkel gebruikt voor de communicatie met de ActiveDirectory, mag je de mappen &#x27;poorten&#x27; en &#x27;uniflow_edu&#x27; verwijderen uit de map php.</p><p>De mappen zien er dan zo uit:</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/gateway1-e49ea6d144f82ee32e152d96844fb59b.png"><img src="/assets/images/gateway2-858124e6d9baa4f94bebed44d6da590f.png"></div><p>Ga naar de map powershell en selecteer het eerste powershell-script. Klik rechts en vraag de eigenschappen op. Mogelijk krijg je onderaan een &#x27;Security&#x27; melding. Vink dan het vinkje bij Unblock aan en bevestig met OK. Herhaal dit voor de andere powershell-scripts.</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/gateway3-ed53fa02aea91507bd08af42adbce1e1.png"></div><p>Ga naar het IIS-beheer, klap het menu links open en selecteer de Default Website. Klik rechts en voeg een virtuele map toe.</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/gateway4-aebdd29ff65e256e603a8cd8244240b1.png"></div><p>Als Alias vul je ‘toolbox’ in.</p><p>Bij Fysiek pad, selecteer je de php map in de Toolbox Gateway (c:\toolbox\php).</p><p>Bij verbinden als vul je een Administrator in die mag schrijven in de ActiveDirectory.</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/gateway5-d15e924911df6e725d7750c2ce4a7b2e.png"></div><p>Ga naar de map php - inc en open het bestand config.php.</p><p>In de variabele <code>$toolbox_url = &#x27;&#x27;</code>; Vul je het adres van je Toolbox in. bv. <code>$toolbox_url = &#x27;https://piusx.kobam.be&#x27;;</code> of <code>$toolbox_url = &#x27;https://mijnschool.tbvs.be&#x27;;</code></p><p>In de variabele <code>$ad_key</code> zet je een zelfgemaakte willekeurige sleutel die cijfers en (hoofd)letters bevat. bv.
<code>$ad_key = &#x27;v4ZD7RJ9Xsd8947E7beV4SvY4rfeDqhDil&#x27;</code>;</p><p>Als je de Toolbox Gateway enkel gebruikt voor de communicatie met ActiveDirectory mag je de uniflow_key en de poort_key negeren.</p><p>In de lijst van <code>$allowed_ips</code> voeg je het IP-adres van je Toolbox toe. Staat je Toolbox op de tbvs.be server, dan is dat IP 217.19.239.174: <code>$allowed_ips = array(&#x27;217.19.239.174&#x27;)</code>;</p><p>Configureer vervolgens op je firewall van de school één poortforwarding zodat de webserver (IIS) die je hebt geïnstalleerd van buitenaf toegankelijk is. Welke poort je gebruikt, mag je zelf kiezen.</p><p>Ga nu naar je Toolbox - Instellingen - ActiveDirectory. In het onderdeel Gateway vul je nu volgende gegevens in:</p><ul><li>Push Key: de sleutel die je in de variabele $ad_key hebt gezet</li><li>URL Gateway: de URL waarop je je webserver kan bereiken. </li></ul><p>Dat kan via een (vast) IP adres zijn: bv. <a href="http://12.34.56.78/toolbox/" target="_blank" rel="noopener noreferrer">http://12.34.56.78/toolbox/</a> (als je poort 80 hebt gebruikt) of <a href="http://12.34.56.78:8001/toolbox/" target="_blank" rel="noopener noreferrer">http://12.34.56.78:8001/toolbox/</a> als je een portforwarding op poort 8001 hebt gemaakt.
Bij de toegelaten IP-adressen vul je het IP-adres van je Toolbox Gateway in (meestal is dat hetzelfde als dat van de URL van je Toolbox). Je kan meerdere IP-adressen invullen door ze met komma&#x27;s te scheiden (bv. als je meerdere gateways hebt voor je internetverbinding).
Klik nu op Test gateway om te kijken of Toolbox verbinding kan maken met je Toolbox Gateway.</p><div class=".markdown mb-5 grid sm:grid-cols-2 false"><img src="/assets/images/gateway6-04704355d131c4ae863b901b2e7ad473.png"></div><p>Vul nu in de instellingen in Toolbox - ActiveDirectory de standaard OU voor bv. leraren in. Ga dan naar de synchronisatie Leraren - Synchroniseer met ActiveDirectory. Klik vervolgens op Start volledige synchronisatie en kijk of er resultaten doorkomen.</p><p>Indien er geen resultaten doorkomen, controleer je of de PowerShell scripts uitgevoerd kunnen worden. Dat doe je op de Toolbox Gateway server. Selecteer in de map c:\toolbox\powershell het bestand getLerarenJson.ps en kies om te bewerken. Voer het script uit en vul de OU in. Hier zal je nu json output moeten doorkrijgen. Krijg je fouten over unsigned scripts, voer dan deze twee commando&#x27;s uit als administrator (PowerShell opstarten als administrator):</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#ffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">Set-ExecutionPolicy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">ExecutionPolicy Unrestricted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">dir</span><span class="token plain"> C:\toolbox\PowerShell\</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Unblock-File</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kopieer code naar klembord" title="Kopieer" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Paginanavigatie documentatie"><a class="pagination-nav__link pagination-nav__link--prev" href="/synchronisatie/synchronisatie_externen/"><div class="pagination-nav__sublabel">Vorige</div><div class="pagination-nav__label">Synchronisatie externen</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/synchronisatie/synchronisatie_EOL/"><div class="pagination-nav__sublabel">Volgende</div><div class="pagination-nav__label">Synchronisatie Exact Online</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#webserver-installeren" class="table-of-contents__link toc-highlight">Webserver installeren</a></li><li><a href="#php-op-de-webserver-installeren" class="table-of-contents__link toc-highlight">PHP op de webserver installeren</a></li><li><a href="#toolbox-gateway-ad-installeren" class="table-of-contents__link toc-highlight">Toolbox gateway AD installeren</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.87e76bbb.js"></script>
<script src="/assets/js/main.2d3fa607.js"></script>
</body>
</html>